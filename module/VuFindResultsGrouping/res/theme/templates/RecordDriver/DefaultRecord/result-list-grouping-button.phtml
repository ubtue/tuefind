<?php
$hasSubRecords = $this->driver->hasSubRecords();
$subRecords = $this->driver->getSubRecords();
$subRecordsCount = 0;
if ($subRecords) {
    $subRecordsCount = sizeof($subRecords);
}
?>
<?php if ($hasSubRecords): ?>
    <!-- grouping button -->
    <?php
    $rand = rand(1, 10000);
    // beware that pgid and pid must be forwarded to be used in result-list-grouped-subrecords.phtml
    $this->pgid = $pgid = 'accordion-' . $rand;
    $this->pid = $pid = 'panel-' . $rand . '-';
    ?>
    <div>
        <a class="btn result-link-label results-group-toggle" data-toggle="collapse" href="#<?=$pgid?>">
            <i class="result-link-icon fa fa-arrow-down"></i>
            <?=$this->transEsc('show_grouped_items')?>
            <span class="badge pull-right"><?=$subRecordsCount?></span>
        </a>
    </div>
    <!-- grouping button - END -->
<?php endif; ?>
