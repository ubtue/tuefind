<section>
    <?php $this->headScript()->appendFile('vendor/ol/ol.js');?>
    <?php $this->headScript()->appendFile('vendor/ol/wrapper.js');?>
    <?php $this->headLink()->appendStylesheet('vendor/ol/ol.css');?>
    <style>
        .map {
            height: 400px;
            width: 100%;
        }
    </style>
    <div id="map" class="map"></div>
    <div id="popup" class="ol-popup" style="background-color: white; padding: 10px;">
        <a href="#" id="popup-closer" class="ol-popup-closer">x</a>
        <div id="popup-content"></div>
    </div>

    <?php
        $partners = [
            // Cooperations
            [   'lon' => '11.384495',
                'lat' => '47.263359',
                'group' => 'cooperation',
                'logo' => $this->imageLink('partners/logo-uibk.svg'),
                'url' => '//www.uibk.ac.at/theol/theoldi/index.html.de',
                'popup' => '<font color=\"black\"><b><a href=\"//www.uibk.ac.at/theol/theoldi/index.html.de\" target=\"_blank\">Theoldi</a></b><br>Universität Innsbruck<br>Innrain 52<br>A-6020 Innsbruck<br><br><img src=\"'.$this->imageLink('partners/logo-uibk.svg').'\" width=\"180\"></font>',
            ],
            [   'lon' => '7.62560',
                'lat' => '51.96262',
                'group' => 'cooperation',
                'logo' => $this->imageLink('partners/wwu.svg'),
                'url' => '//www.uni-muenster.de/FB2/ikr/datenbank/index.shtml',
                'popup' => '<font color=\"black\"><b><a href=\"//www.uni-muenster.de/FB2/ikr/datenbank/index.shtml\" target=\"_blank\">DaKaR</a></b><br>Institut für Kanonisches Recht<br>Domplatz 23<br>D-48143 Münster<br><br><img src=\"'.$this->imageLink('partners/wwu.svg').'.\" width=\"180\"></font>',
            ],
            [   'lon' => '9.93202',
                'lat' => '49.79608',
                'group' => 'cooperation',
                'logo' => $this->imageLink('partners/ZAF_Logo_3.png'),
                'logo_wrap' => ['start' => '<div style="background-color: red; text-align: center;">', 'end' => '</div>'],
                'url' => '//www.augustinus.de',
                'popup' => '<font color=\"black\"><b><a href=\"//www.augustinus.de\" target=\"_blank\">Augustinus-Forschungsdatenbank</a></b><br>Zentrum für Augustinusforschung<br>Dominikanerplatz 4<br>D-97070 Würzburg<br><br><div style=\"background-color: red; text-align: center;\"><img src=\"'.$this->imageLink('partners/ZAF_Logo_3.png').'\" width=\"180\"></div></font>',
            ],
            [   'lon' => '6.95137',
                'lat' => '50.94415',
                'group' => 'cooperation',
                'logo' => $this->imageLink('partners/logo_bibliothek_2017_10_24_420x70.jpg'),
                'url' => '//dombibliothek-koeln.de',
                'popup' => '<font color=\"black\"><b><a href=\"//dombibliothek-koeln.de\" target=\"_blank\">Erzbischöfliche Diözesan- und Dombibliothek Köln</a></b><br> Kardinal-Frings-Straße 1-3<br>D-50668 Köln<br><br><img src=\"'.$this->imageLink('partners/logo_bibliothek_2017_10_24_420x70.jpg').'\" width=\"180\"></font>',
            ],
            // Protestant Community
            [   'lon' => '8.77202',
                'lat' => '50.80794',
                'group' => 'protestant',
                'logo' => $this->imageLink('partners/logo-marburg.svg'),
                'url' => '//www.uni-marburg.de/de/fb05/fachgebiete/fachgebiete/systematische-theologie/personal/prof-dr-krueger-1',
                'popup' => '<font color=\"black\"><b><a href=\"//www.uni-marburg.de/de/fb05/fachgebiete/fachgebiete/systematische-theologie/personal/prof-dr-krueger-1\" target=\"_blank\">Prof. Dr. Malte Krüger</a></b><br>Philipps-Universität Marburg<br>Lahntor 3<br>D-35032 Marburg<br><br><img src=\"'.$this->imageLink('partners/logo-marburg.svg').'\" width=\"180\"></font>',
            ],
            [   'lon' => '9.98460',
                'lat' => '53.55749',
                'group' => 'protestant',
                'logo' => $this->imageLink('partners/logo-hamburg.svg'),
                'url' => '//www.theologie.uni-hamburg.de/einrichtungen/kontakt/kristin-merle.html',
                'popup' => '<font color=\"black\"><b><a href=\"//www.theologie.uni-hamburg.de/einrichtungen/kontakt/kristin-merle.html\" target=\"_blank\">Prof. Dr. Kristin Merle</a></b><br>Universität Hamburg<br>Institut für Praktische Theologie<br>Gorch-Fock-Wall 7<br>D-20354 Hamburg<br><br><img src=\"'.$this->imageLink('partners/logo-hamburg.svg').'\" width=\"180\"></font>',
            ],
            [   'lon' => '10.11030',
                'lat' => '54.34504',
                'group' => 'protestant',
                'logo' => $this->imageLink('partners/logo-kiel.svg'),
                'url' => '//www.theol.uni-kiel.de/de/professuren/kg-mueller/team/mueller',
                'popup' => '<font color=\"black\"><b><a href=\"//www.theol.uni-kiel.de/de/professuren/kg-mueller/team/mueller\" target=\"_blank\">Prof. Dr. Andreas Müller</a></b><br>Christian-Albrechts-Universität zu Kiel<br>Theologische Fakultät<br>Leibnitzstr. 4<br>D-24118 Kiel<br><br><img src=\"'.$this->imageLink('partners/logo-kiel.svg').'\" width=\"180\"></font>',
            ],
            [   'lon' => '8.54461',
                'lat' => '47.37001',
                'group' => 'protestant',
                'logo' => $this->imageLink('partners/logo-zuerich.jpg'),
                'url' => '//www.theologie.uzh.ch/de/faecher/altes-testament/Lehrst%C3%BChle-und-Personen/konrad-schmid.html',
                'popup' => '<font color=\"black\"><b><a href=\"//www.theologie.uzh.ch/de/faecher/altes-testament/Lehrst%C3%BChle-und-Personen/konrad-schmid.html\" target=\"_blank\">Prof. Dr. Konrad Schmid</a></b><br>Universität Zürich<br>Kirchgasse 9<br>CH-8001 Zürich<br><br><img src=\"'.$this->imageLink('partners/logo-zuerich.jpg').'\" width=\"180\"></font>',
            ],
            [   'lon' => '9.05533',
                'lat' => '48.52535',
                'group' => 'protestant',
                'logo' => $this->imageLink('Logo_Universitaet_Tuebingen.svg'),
                'url' => '//uni-tuebingen.de/fakultaeten/evangelisch-theologische-fakultaet/lehrstuehle-und-institute/kirchengeschichte/kirchengeschichte-i/mitarbeiter/leppin-volker-prof-dr/',
                'popup' => '<font color=\"black\"><b><a href=\"//uni-tuebingen.de/fakultaeten/evangelisch-theologische-fakultaet/lehrstuehle-und-institute/kirchengeschichte/kirchengeschichte-i/mitarbeiter/leppin-volker-prof-dr/\" target=\"_blank\">Prof. Dr. Volker Leppin</a></b><br>Eberhard Karls Universität Tübingen<br>Evangelisch-Theologische Fakultät<br>Liebermeisterstr. 12<br>D-72076 Tübingen<br><br><img src=\"'.$this->imageLink('Logo_Universitaet_Tuebingen.svg').'\" width=\"180\"></font>',
            ],
            // Catholic Community
            [   'lon' => '8.77052',
                'lat' => '51.70649',
                'group' => 'catholic',
                'logo' => $this->imageLink('partners/logo-paderborn.png'),
                'url' => '//kw.uni-paderborn.de/institut-fuer-katholische-theologie/praktische-theologie/team/prof-dr-rita-burrichter/',
                'popup' => '<font color=\"black\"><b><a href=\"//kw.uni-paderborn.de/institut-fuer-katholische-theologie/praktische-theologie/team/prof-dr-rita-burrichter/\" target=\"_blank\">Prof. Dr. Rita Burrichter</a></b><br>Universität Paderborn<br>Pohlweg 55<br>D-33098 Paderborn<br><br><img src=\"'.$this->imageLink('partners/logo-paderborn.png').'\" width=\"180\"></font>',
            ],
            [   'lon' => '11.57980',
                'lat' => '48.15049',
                'group' => 'catholic',
                'logo' => $this->imageLink('partners/logo-muenchen.jpg'),
                'url' => '//www.kaththeol.uni-muenchen.de/lehrstuehle/bibl_einleitung/personen/haefner/index.html',
                'popup' => '<font color=\"black\"><b><a href=\"//www.kaththeol.uni-muenchen.de/lehrstuehle/bibl_einleitung/personen/haefner/\" target=\"_blank\">Prof. Dr. Gerd Häfner</a></b><br>Ludwig-Maximilians-Universität München<br>Katholisch-Theologische Fakultät<br>Geschwister-Scholl-Platz 1<br>D-80539 München<br><br><img src=\"'.$this->imageLink('partners/logo-muenchen.jpg').'\" width=\"180\"></font>',
            ],
            [   'lon' => '7.60707',
                'lat' => '51.95951',
                'group' => 'catholic',
                'logo' => $this->imageLink('partners/wwu.svg'),
                'url' => '//www.uni-muenster.de/FB2/personen/ics/heimbach-steins.html',
                'popup' => '<font color=\"black\"><b><a href=\"//www.uni-muenster.de/FB2/personen/ics/heimbach-steins.html\" target=\"_blank\">Prof. Dr. Marianne Heimbach-Steins</a></b><br>WWU Münster<br>Institut für Christliche Sozialwissenschaft<br>Robert-Koch-Str. 29<br>D-48149 Münster<br><br><img src=\"'.$this->imageLink('partners/wwu.svg').'\" width=\"180\"></font>',
            ],
            [   'lon' => '12.0962',
                'lat' => '48.9964',
                'group' => 'catholic',
                'logo' => $this->imageLink('partners/logo-regensburg.gif'),
                'url' => '//www.uni-regensburg.de/theologie/mittlere-und-neue-kirchengeschichte/personen/prof-dr-klaus-unterburger/',
                'popup' => '<font color=\"black\"><b><a href=\"//www.uni-regensburg.de/theologie/mittlere-und-neue-kirchengeschichte/personen/prof-dr-klaus-unterburger/\" target=\"_blank\">Prof. Dr. Klaus Unterburger</a></b><br>Universität Regensburg<br>Fakultät für Katholische Theologie<br>Universitätsstr. 31<br>D-93040 Regensburg<br><br><img src=\"'.$this->imageLink('partners/logo-regensburg.gif').'\" width=\"180\"></font>',
            ],
            [   'lon' => '9.05555',
                'lat' => '48.52561',
                'group' => 'catholic',
                'logo' => $this->imageLink('Logo_Universitaet_Tuebingen.svg'),
                'url' => '//uni-tuebingen.de/fakultaeten/katholisch-theologische-fakultaet/lehrstuehle/praktische-theologie/lehrstuhl-fuer-praktische-theologie/team/prof-dr-michael-schuessler/',
                'popup' => '<font color=\"black\"><b><a href=\"//uni-tuebingen.de/fakultaeten/katholisch-theologische-fakultaet/lehrstuehle/praktische-theologie/lehrstuhl-fuer-praktische-theologie/team/prof-dr-michael-schuessler/\" target=\"_blank\">Prof. Dr. Michael Schüßler</a></b><br>Eberhard Karls Universität Tübingen<br>Katholisch-Theologische Fakultät<br>Liebermeisterstr. 12<br>D-72076 Tübingen<br><br><img src=\"'.$this->imageLink('Logo_Universitaet_Tuebingen.svg').'\" width=\"180\"></font>',
            ],
            // Tuebingen (should be last entries so they overwrite earlier drawn markers)
            [
                'lon' => '9.06178',
                'lat' => '48.52515',
                'group' => 'tuebingen',
                'logo' => $this->imageLink('Logo_Universitaet_Tuebingen.svg'),
                'url' => '//uni-tuebingen.de/fakultaeten/katholisch-theologische-fakultaet/lehrstuehle/praktische-theologie/lehrstuhl-fuer-praktische-theologie/team/prof-dr-michael-schuessler/',
                'popup' => '<font color=\"black\"><b><a href=\"//ub.uni-tuebingen.de\" target=\"_blank\">Index Theologicus</a></b><br>Universitätsbibliothek Tübingen<br>Wilhelmstr. 32<br>D-72074 Tübingen<br><br><img src=\"' . $this->imageLink('Logo_Universitaet_Tuebingen.svg'). '\" width=\"180\"></font>',
            ],
        ];
    ?>

    <script type="text/javascript">
        // Add markers to new or existing map
        function AddMarkers(highlightGroup=null) {
            let markers = {
                'default': '<?=$this->imageLink('ol/marker.svg')?>',
                'highlight': '<?=$this->imageLink('ol/marker-tuebingen.png')?>',
                'tuebingen': '<?=$this->imageLink('ol/marker-tuebingen.png')?>',
                'cooperation': '<?=$this->imageLink('ol/marker-green.png')?>',
                'protestant': '<?=$this->imageLink('ol/marker-blue.png')?>',
                'catholic': '<?=$this->imageLink('ol/marker-black.png')?>',
            };

            let marker = markers.default;
            <?php foreach ($partners as $partner): ?>
                marker = markers.default;
                if (highlightGroup != null && highlightGroup == '<?=$partner['group']?>')
                    marker = markers.<?=$partner['group']?>;
                OpenStreetMapWrapper.AddLocation(<?=$partner['lon']?>, <?=$partner['lat']?>, marker, "<?=$partner['popup']?>");
            <?php endforeach; ?>
        }

        // Initial drawing of the map
        function DrawMap() {
            OpenStreetMapWrapper.DrawMap(12.810, 51.352, /* zoom */ 5, /* proxy */ '/proxy/load?');
            AddMarkers();
            OpenStreetMapWrapper.BuildLocationLayer();
        }

        // Re-use existing map, remove location/marker layer and re-draw markers
        function HighlightMarkerGroup(highlightGroup) {
            OpenStreetMapWrapper.ResetLocationLayer();
            AddMarkers(highlightGroup);
            OpenStreetMapWrapper.BuildLocationLayer();
        }

        $(function() {
            DrawMap();
        });
    </script>
    <div class="cw-py-2" style="display: flex; flex-direction: row; flex-wrap:wrap; justify-content: space-between;">
        <span class="badge badge-pill badge-primary">Primary</span>
        <div style="color: green;" onclick="HighlightMarkerGroup('cooperation')" ><button>Kooperationen</button></div>
        <div style="color: black;" onclick="HighlightMarkerGroup('catholic')"><button>Katholische Fachcommunity</button></div>
        <div style="color: blue;" onclick="HighlightMarkerGroup('protestant')"><button>Evangelische Fachcommunity</button></div>
        <div style="color: #a51e37;" onclick="HighlightMarkerGroup('tuebingen')"><button>Tübingen</button></div>
    </div>
</section>

<section class="cw-py-5 bg-gray-100 shadow">
    <div class="cw-container">
        <h1 class="cw-h1">Networking</h1>
        <p class="cw-lead">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi.
        </p>
    </div>
</section>

<section class="cw-py-5">
    <div class="cw-container">
        <div class="cw-row">
            <!-- venue item-->
            <div data-marker-id="59c0c8e33b1527bfe2abaf92" class="col-sm-6 col-lg-3 cw-mb-5 hover-animate">
                <div class="cw-card h-100 border-0 shadow">
                    <div style="background-image: url(/themes/ixtheo2/images/cw/restaurant-1430931071372-38127bd472b8.jpg); min-height: 200px;" class="cw-card-img-top cw-overflow-hidden cw-dark-overlay cw-bg-cover">
                        <!--img.img-fluid(src="#{imgBasePath}#{val.image}" alt="#{val.name}")--><a href="<?=$this->url('content-page', ['page' => 'advisors'])?>" class="cw-tile-link"></a>
                        <div class="cw-card-img-overlay-bottom cw-z-index-20">
                            <h4 class="cw-h4 cw-text-white cw-text-shadow">Beirat</h4>
                            <!--<p class="cw-mb-2 cw-text-xs"><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-gray-300"></i></p>-->
                        </div>
                        <!--
                        <div class="cw-card-img-overlay-top cw-d-flex cw-justify-content-between cw-align-items-center">
                            <div class="cw-badge cw-badge-transparent cw-badge-pill cw-px-3 cw-py-2">Restaurants</div><a href="javascript: void();" class="cw-card-fav-icon cw-position-relative cw-z-index-40">
                                <svg class="cw-svg-icon cw-text-white">
                                <use xlink:href="#heart-1"> </use>
                                </svg></a>
                        </div>
                        -->
                    </div>
                    <div class="cw-card-body">
                        <p class="text-sm text-muted mb-3"> Cupidatat excepteur non dolore laborum et quis nostrud veniam dolore deserunt. Pariatur dolore ut in elit id nulla. Irur...</p>
                        <p class="text-sm text-muted text-uppercase mb-1">By <a href="#" class="text-dark">Matt Damon</a></p>
                        <p class="text-sm mb-0"><a href="#" class="mr-1">Restaurant,</a><a href="#" class="mr-1">Contemporary</a>
                        </p>
                    </div>
                </div>
            </div>
            <!-- venue item-->
            <div data-marker-id="59c0c8e322f3375db4d89128" class="col-sm-6 col-lg-3 cw-mb-5 hover-animate">
                <div class="cw-card h-100 border-0 shadow">
                    <div style="background-image: url(/themes/ixtheo2/images/cw/restaurant-1436018626274-89acd1d6ec9d.jpg); min-height: 200px;" class="cw-card-img-top cw-overflow-hidden cw-dark-overlay cw-bg-cover">
                        <!--img.img-fluid(src="#{imgBasePath}#{val.image}" alt="#{val.name}")--><a href="<?=$this->url('content-page', ['page' => 'cooperations'])?>" class="cw-tile-link"></a>
                        <div class="cw-card-img-overlay-bottom cw-z-index-20">
                            <h4 class="cw-h4 cw-text-white cw-text-shadow">Kooperationen</h4>
                            <!--<p class="cw-mb-2 cw-text-xs"><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i></p>-->
                        </div>
                        <!--
                        <div class="cw-card-img-overlay-top cw-d-flex cw-justify-content-between cw-align-items-center">
                            <div class="cw-badge cw-badge-transparent cw-badge-pill cw-px-3 cw-py-2">Restaurant</div><a href="javascript: void();" class="cw-card-fav-icon cw-position-relative cw-z-index-40">
                                <svg class="cw-svg-icon cw-text-white">
                                <use xlink:href="#heart-1"> </use>
                                </svg></a>
                        </div>
                        -->
                    </div>
                    <div class="cw-card-body">
                        <p class="text-sm text-muted mb-3"> Proident irure eiusmod velit veniam consectetur id minim irure et nostrud mollit magna velit. Commodo amet proident aliq...</p>
                        <p class="text-sm text-muted text-uppercase mb-1">By <a href="#" class="text-dark">Matt Damon</a></p>
                        <p class="text-sm mb-0"><a href="#" class="mr-1">Restaurant,</a><a href="#" class="mr-1">Fusion</a>
                        </p>
                    </div>
                </div>
            </div>
            <!-- venue item-->
            <div data-marker-id="59c0c8e3a31e62979bf147c9" class="col-sm-6 col-lg-3 cw-mb-5 hover-animate">
                <div class="cw-card h-100 border-0 shadow">
                    <div style="background-image: url(/themes/ixtheo2/images/cw/restaurant-1466978913421-dad2ebd01d17.jpg); min-height: 200px;" class="cw-card-img-top cw-overflow-hidden cw-dark-overlay cw-bg-cover">
                        <!--img.img-fluid(src="#{imgBasePath}#{val.image}" alt="#{val.name}")--><a href="<?=$this->url('content-page', ['page' => 'experts'])?>" class="cw-tile-link"></a>
                        <div class="cw-card-img-overlay-bottom cw-z-index-20">
                            <h4 class="cw-h4 cw-text-white cw-text-shadow">Fachreferenten</h4>
                            <!--<p class="cw-mb-2 cw-text-xs"><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i></p>-->
                        </div>
                        <!--
                        <div class="cw-card-img-overlay-top cw-d-flex cw-justify-content-between cw-align-items-center">
                            <div class="cw-badge cw-badge-transparent cw-badge-pill cw-px-3 cw-py-2">Music club</div><a href="javascript: void();" class="cw-card-fav-icon cw-position-relative cw-z-index-40">
                                <svg class="cw-svg-icon cw-text-white">
                                <use xlink:href="#heart-1"> </use>
                                </svg></a>
                        </div>
                        -->
                    </div>
                    <div class="cw-card-body">
                        <p class="text-sm text-muted mb-3"> Lorem amet ex duis in et fugiat consectetur laborum eiusmod labore. Quis cupidatat et do dolor in in magna. Eu sit quis ...</p>
                        <p class="text-sm text-muted text-uppercase mb-1">By <a href="#" class="text-dark">Matt Damon</a></p>
                        <p class="text-sm mb-0"><a href="#" class="mr-1">Music,</a><a href="#" class="mr-1">Techno,</a><a href="#" class="mr-1">House</a>
                        </p>
                    </div>
                </div>
            </div>
            <!-- venue item-->
            <div data-marker-id="59c0c8e3503eb77d487e8082" class="col-sm-6 col-lg-3 cw-mb-5 hover-animate">
                <div class="cw-card h-100 border-0 shadow">
                    <div style="background-image: url(/themes/ixtheo2/images/cw/restaurant-1477763858572-cda7deaa9bc5.jpg); min-height: 200px;" class="cw-card-img-top cw-overflow-hidden cw-dark-overlay cw-bg-cover">
                        <!--img.img-fluid(src="#{imgBasePath}#{val.image}" alt="#{val.name}")--><a href="<?=$this->url('content-page', ['page' => 'fids'])?>" class="cw-tile-link"></a>
                        <div class="cw-card-img-overlay-bottom cw-z-index-20">
                            <h4 class="cw-h4 cw-text-white cw-text-shadow">Andere FIDs</h4>
                            <!--<p class="cw-mb-2 cw-text-xs"><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-warning"></i><i class="fa fa-star text-gray-300"></i><i class="fa fa-star text-gray-300"></i></p>-->
                        </div>
                        <!--
                        <div class="cw-card-img-overlay-top cw-d-flex cw-justify-content-between cw-align-items-center">
                            <div class="cw-badge cw-badge-transparent cw-badge-pill cw-px-3 cw-py-2">Music club</div><a href="javascript: void();" class="cw-card-fav-icon cw-position-relative cw-z-index-40">
                                <svg class="cw-svg-icon cw-text-white">
                                <use xlink:href="#heart-1"> </use>
                                </svg></a>
                        </div>
                        -->
                    </div>
                    <div class="cw-card-body">
                        <p class="text-sm text-muted mb-3"> Deserunt eiusmod Lorem proident consequat elit culpa laboris ea cupidatat. Consequat dolore proident ipsum qui sint enim...</p>
                        <p class="text-sm text-muted text-uppercase mb-1">By <a href="#" class="text-dark">Matt Damon</a></p>
                        <p class="text-sm mb-0"><a href="#" class="mr-1">Music,</a><a href="#" class="mr-1">Club,</a><a href="#" class="mr-1">Rock</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
