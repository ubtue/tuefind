<?php $routeParams = $this->tuefind()->getRouteParams(); $advancedSearch = "";
  if($routeParams['controller'] == "Search" && $routeParams['action'] == "Advanced") {
    $advancedSearch = "advancedSearch";
  }
?>
<div class="cover-header screen-height screen-width bg-image bg-attachment-fixed <?=$advancedSearch;?>">
  <div class="cover-header-inner-wrapper">
    <div class="cover-header-inner">
      <div class="cover-color-overlay color-accent opacity-60 blend-mode-normal"></div>
      <div class="section-inner fade-block" style="opacity: 1;">
        <header class="hidden-print">
          <div class="container-fluid px-0">
            <?php if (isset($this->layout()->srmessage)): // message for benefit of screen-reader users ?>
            <span class="sr-only" role="heading" aria-level="1"><?=$this->layout()->srmessage ?></span>
          <?php endif; ?>
          <a class="sr-only" href="#content"><?=$this->transEsc('Skip to content') ?></a>
            <!--<div class="container-fluid bg-white">-->
    <div class="row">
        <div class="col-12">

            <!-- Begin section Navbar -->
            <nav class="navbar ix-navbar navbar-expand-lg navbar-light justify-content-between ix-fixed-top">

                <!-- TueFind extension template -->
                <?=$this->render('header/logo');?>

                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#header-collapse" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="fa fa-bars" aria-hidden="true"></i>
                </button>

                <?php if (!isset($this->layout()->renderingError)): ?>
                <div class="collapse navbar-collapse" id="header-collapse">
                    <nav>
                        <ul class="nav navbar-nav navbar-right flip">

                            <!-- Images for supporters -->

                            <!-- Begin section Main Menu -->
                            <!-- Home -->
                            <?php /*?>
                            <li class="nav-item active">
                                <a class="nav-link" href="<?=$this->url('home')?>" >
                                    <i class="fa fa-home" aria-hidden="true"> </i>
                                    <?=$this->transEsc('Home');?>
                                </a>
                            </li>
                            <?php */?>


                            <!-- ixtheo2 search button box -->
                            <!-- FAQ -->
                            <?php /*
                            <li class="language dropdown">
                                <a class="nav-link" href="/Search/Advanced"><i class='fa fa-search-plus'></i> Search <span class="caret"></span></a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                  <li><a class="dropdown-item" href="<?=$this->url('content-page', ['page' => 'ixtheo_content']) ?>"><?=$this->transEsc('FID-Content')?></a></li>
                                  <li><a class="dropdown-item" href="<?=$this->url('content-page', ['page' => 'index_biblicus']) ?>"><?=$this->transEsc('Digitale Quellen')?></a></li>
                                  <li><a class="dropdown-item" href="<?=$this->url('content-page', ['page' => 'theology_digital']) ?>"><?=$this->transEsc('Theologie digital')?></a></li>
                                  <li><a class="dropdown-item" href="<?=$this->url('content-page', ['page' => 'canon_law']) ?>"><?=$this->transEsc('Historische Drucke')?></a></li>
                                  <li><a class="dropdown-item" href="https://relbib.de/"><?=$this->transEsc('RelBib')?></a></li>
                                  <li><a class="dropdown-item" href="https://bible.ixtheo.de/"><?=$this->transEsc('Index Biblicus')?></a></li>
                                  <li><a class="dropdown-item" href="https://churchlaw.ixtheo.de/"><?=$this->transEsc('Kirchenrecht')?></a></li>
                                </ul>
                            </li>
                            */ ?>

                            <!-- ixtheo2 login button box -->
                            <?=$this->render('header/login');?>

                            <?php if (isset($this->layout()->themeOptions) && count($this->layout()->themeOptions) > 1): ?>
                              <li class="theme dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><?=$this->transEsc("Theme")?> <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                  <?php foreach ($this->layout()->themeOptions as $current): ?>
                                    <li<?=$current['selected'] ? ' class="active"' : ''?>>
                                      <a href="<?=$this->escapeHtmlAttr($this->url()->addQueryParameters(['ui' => $current['name']])) ?>" rel="nofollow">
                                        <?=$this->transEsc($current['desc']) ?>
                                      </a>
                                    </li>
                                  <?php endforeach; ?>
                                </ul>
                              </li>
                            <?php endif; ?>

                            <?php if (isset($this->layout()->allLangs) && count($this->layout()->allLangs) > 1): ?>
                              <li class="language dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class='fa fa-globe' ></i> <?=$this->transEsc("Language")?><b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                  <?php
                                    //TueFind: Basic VuFind functionality changed, removed author ID from URL
                                    $routeParams = $this->tuefind()->getRouteParams();
                                    foreach ($this->layout()->allLangs as $langCode => $langName): ?>
                                      <li<?=$this->layout()->userLang == $langCode ? ' class="active"' : ''?>>
                                        <?php $langURL = $this->escapeHtmlAttr($this->url()->addQueryParameters(['lng' => $langCode]));
                                            if($routeParams['controller'] == "Authority" && $routeParams['action'] == "Home") {
                                                $langURL = $this->escapeHtmlAttr($this->url()->addQueryParametersToAuthority(['lng' => $langCode]));
                                            }
                                        ?>
                                        <a href="<?=$langURL?>" rel="nofollow">
                                          <?=$this->displayLanguageOption($langName) ?>
                                        </a>
                                      </li>
                                  <?php endforeach; ?>
                                </ul>
                              </li>
                            <?php endif; ?>

                            <?=$this->render('header/menu');?>

                        <!-- End section Main Menu -->
                        </ul>
                    </nav>
                </div>
            <?php endif; ?>
            <!-- End section Navbar -->
        </nav>
    </div><!-- close col's -->
</div><!-- close row -->
<!--</div>--><!-- close container -->

<!--  Begin seachbox -->
<!-- IxTheo2: Disable searchbox here, move to separate section. Instead we only have the title here. -->
<?=''/*$this->layout()->searchbox*/ ?>
<section class="section-home">
    <div class="panel-home">
        <?=$this->inlineScript(\Laminas\View\Helper\HeadScript::SCRIPT, 'TueFind2.ChangeSearchboxHeight();', 'SET')?>
        <div>
            <h1><a href="<?=$this->url('home')?>" title="Index Theologicus">Index Theologicus</a></h1>
            <small><?=$this->transEsc("ixtheo_subtitle")?></small>
        </div>
    </div>
</section>
<!--  End seachbox -->

<!-- Begin header image -->
<?php //Set up the header image. It comes up instead of the search box.
   //Accepts:
   //1. false; nothing will be displayed, this is default.
   //2. A string; the header image in the string will be displayed. JavaScript will not applied.
if(isset($this->layout()->headerImage)) {
    echo '<img src="'.$this->imageLink($this->layout()->headerImage).'" class="img-fluid header-image" alt="header image"/>';
}
?>
<!-- End header image -->

          </div>
        </header>
      </div><!-- .section-inner -->
    </div><!-- .cover-header-inner -->
  </div><!-- .cover-header-inner-wrapper -->
</div>
<span class="ix-copyright">Â© <span class="ix-copyright-name">Marco Varenkamp</span></span>
<!-- Breadcrumbs -->
<?php if(!empty($this->layout()->breadcrumbs)): ?>
  <div class="container breadcrumb-wrapper hidden-print <?=$advancedSearch;?>">
    <?php if(is_array($this->layout()->breadcrumbs)): ?>
      <?php if(count($this->layout()->breadcrumbs) > 1): ?>
        <?=$this->render('breadcrumbs/multi.phtml', [
          'parents' => $this->layout()->breadcrumbs,
          'title' => $this->layout()->title,
          'from' => $this->layout()->from
        ]) ?>
      <?php else: ?>
        <?=$this->render('breadcrumbs/default.phtml', [
          'parents' => $this->layout()->breadcrumbs,
          'title' => $this->layout()->title
        ]) ?>
      <?php endif; ?>
    <?php elseif ($this->layout()->breadcrumbs !== false): ?>
      <?=$this->render('breadcrumbs/simple.phtml'); ?>
    <?php endif; ?>
  </div>
<?php endif; ?>


<!-- IxTheo2: Display searchbox as separate section -->
<?=$this->layout()->searchbox ?>

<style>
  .ix-copyright {
    float: right;
    margin-top: -25px;
    margin-right: 10px;
    color: #fff;
    cursor: pointer;
  }
  .ix-copyright-name {
    display: none;
  }
</style>

<?php
$jsSnippet = <<< 'EOD'
$(document).ready(function(){
  $('.ix-copyright').click(function(){
    $(this).find('.ix-copyright-name').toggle();
  })
});
EOD;?>
<?=$this->inlineScript(\Laminas\View\Helper\HeadScript::SCRIPT, $jsSnippet, 'SET')?>
